!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://yastatic.net/s3/fiji-static/_/",n(n.s=3)}({3:function(t,e,n){n("yYyQ"),t.exports=n("qWFb")},"8Qk7":function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n("SA1Q");e.appendQueryString=i.appendQueryString,e.stringifyUrlParams=i.stringifyUrlParams;var o,u=n("bVLW"),a="application/json; charset=utf-8",c={Accept:a},s=function(){};function f(t,e,n,i){void 0===e&&(e={});var o=r({},"json"===e.format?c:{},e.headers),u=e.body,s="";return Object.keys(o).some((function(t){return"content-type"===t.toLowerCase()}))?s=String(u||""):(o["content-type"]=a,"string"!=typeof u&&(s=JSON.stringify(u))),l(t,r({},e,{method:i,headers:o}),n,s)}function l(t,e,n,r){var a=n.successCallback,c=void 0===a?s:a,f=n.failureCallback,l=void 0===f?s:f,d=e.headers,h=void 0===d?{}:d,p=e.queryParams,b=void 0===p?{}:p,v=e.timeout,y=void 0===v?3e4:v,g=e.credentials,m=void 0===g?"include":g,w=e.method,O=void 0===w?"GET":w,j=function(t,n){var r=t.response;if("json"===e.format)try{r=JSON.parse(r)}catch(i){return void l(o.JSON_PARSE_ERROR,t)}n?l(n,t,r):c(r,t)},_=new XMLHttpRequest;return _.open(O,i.appendQueryString(t,b)),_.withCredentials=u.shouldSendCredentials(t,m),_.timeout=y,Object.keys(h).forEach((function(t){return _.setRequestHeader(t,h[t])})),_.onload=function(){_.status>=200&&_.status<300?j(_):j(_,o.ERROR_STATUS_CODE)},_.onerror=function(){l(o.REQUEST_FAILED,_)},_.ontimeout=function(){l(o.TIMEOUT,_)},_.send(r),_}!function(t){t.TIMEOUT="TIMEOUT",t.REQUEST_FAILED="REQUEST_FAILED",t.JSON_PARSE_ERROR="JSON_PARSE_ERROR",t.ERROR_STATUS_CODE="ERROR_STATUS_CODE"}(o=e.AjaxError||(e.AjaxError={})),e.get=function(t,e,n){return void 0===e&&(e={}),l(t,r({},e,{method:"GET"}),n)},e.post=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"POST")},e.put=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"PUT")},e.del=function(t,e,n){return void 0===e&&(e={}),f(t,e,n,"DELETE")},e.sendRequest=l},"9Bea":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"Aok+":function(t,e,n){"use strict";n.r(e),n.d(e,"getHistoryQueue",(function(){return i}));var r=n("K+Fd"),i=function(){return window.Ya=window.Ya||{},window.Ya.HistoryQueue||(window.Ya.HistoryQueue=new r.HistoryQueue),window.Ya.HistoryQueue}},Aplp:function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},u=0,a=0;function c(t){var e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function s(){var t=c(+new Date);return t!==r?(u=0,r=t):t+"."+c(u++)}for(;a<64;a++)o[i[a]]=a;s.encode=c,s.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+o[t.charAt(a)];return e},t.exports=s},Axkg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},BJbV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t?1===t?e.one:e.some:e.none||""}},D1uz:function(t,e,n){"use strict";n.r(e),n.d(e,"useChangeCbirPage",(function(){return h}));var r=n("cDcd"),i=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},o=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=n("QPDF"),a=n("QGFb"),c=n("eWTM"),s=n("NFCg"),f=function(){return f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},f.apply(this,arguments)},l=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},d=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h=function(){var t=Object(c.useHistoryPushState)(),e=Object(s.useHistoryReplaceState)();return Object(r.useCallback)((function(n){var r=n.pageType,c=n.queryParams,s=n.url,h=void 0===s?function(t){return void 0===t&&(t={}),BEM.blocks.uri.buildRelativeUrl(BEM.blocks["i-global"].param("router").search,BEM.blocks["i-url-controller"].mergePassedUrlParams(t))}(c):s,p=n.state,b=void 0===p?{}:p,v=n.withReplace,y=n.withLoad,g=n.withLegacyLocationChange;return l(void 0,void 0,void 0,(function(){var n;return d(this,(function(c){switch(c.label){case 0:return g?(Object(a.reactBus)().emit("location:change",{url:h}),[2]):(n=void 0!==r?f(f({},b),{cbirPageType:r}):b,v?[4,e(n,h)]:[3,2]);case 1:return c.sent(),[3,4];case 2:return[4,t(n,h)];case 3:c.sent(),c.label=4;case 4:return Object(a.reactBus)().emit("cbir:change-page",{pageType:r,url:h,withReplace:!0,withLoad:y}),[4,(s=u.noop,i(void 0,void 0,Promise,(function(){return o(this,(function(t){return[2,new Promise((function(t,e){window.setTimeout((function(){try{t(s())}catch(n){e(n)}}))}))]}))})))];case 5:return c.sent(),[2]}var s}))}))}),[e,t])}},"Dps+":function(t,e,n){"use strict";t.exports=n("gWr/")},HivH:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},ISzt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"K+Fd":function(t,e,n){"use strict";n.r(e),n.d(e,"HistoryQueue",(function(){return i}));var r=n("tI3j"),i=function(){function t(){this.listeners=[],this.jobs=[],this.nextTickJobRafId=0,this.onPopState=this.onPopState.bind(this)}return t.prototype.resolveCurrentJob=function(t){var e;!1!==(null===(e=this.currentJob)||void 0===e?void 0:e.trigger)&&this.listeners.forEach((function(e){return e(t)})),this.currentJob?(this.currentJob.resolve(t),this.currentJob=void 0):this.reset()},t.prototype.executeCurrentJob=function(){var t=this;this.currentJob&&(this.currentJob.execute(),this.currentJob.async||(this.nextTickJobRafId=requestAnimationFrame((function(){t.resolveCurrentJob(Object(r.getGlobalHistoryState)()),t.next()}))))},t.prototype.onPopState=function(t){this.resolveCurrentJob(t.state||{}),this.next()},t.prototype.next=function(){this.currentJob||(this.currentJob=this.jobs.shift(),this.executeCurrentJob())},t.prototype.reset=function(){this.jobs=[],this.currentJob=void 0,cancelAnimationFrame(this.nextTickJobRafId)},t.prototype.startListening=function(t){0===this.listeners.length&&window.addEventListener("popstate",this.onPopState),this.listeners.push(t)},t.prototype.stopListening=function(t){this.listeners=this.listeners.filter((function(e){return e!==t})),0===this.listeners.length&&window.removeEventListener("popstate",this.onPopState)},t.prototype.pushJob=function(t,e,n){var r=this;return void 0===n&&(n=!0),new Promise((function(i){r.jobs.push({execute:t,resolve:i,async:e,trigger:n}),r.next()}))},t}()},MMKl:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n("ISzt"),o=n("BJbV"),u=n("zU8/"),a=n("9Bea"),c=n("Axkg"),s=n("gKus"),f=n("jm4S"),l=n("HivH"),d=n("n8NE"),h={be:i.default,en:o.default,id:u.default,kk:a.default,ru:c.default,tr:s.default,tt:f.default,uk:l.default,uz:d.default},p=["ru"];function b(t){return-1===["tr","id","fi","lt","pl","et","lv"].indexOf(t)?"ru":"en"}function v(t,e){for(var n=[],r=t.length,i=0;i<r;){var o=t.indexOf("{",i);if(-1===o)return n.push(t.substring(i)),n;var u=t.indexOf("}",o);if(-1===u)return n.push(t.substring(i)),n;n.push(t.substring(i,o),e[t.substring(o+1,u)]),i=u+1}return n}function y(t,e,n){void 0===n&&(n={});var i=function(t,e){var n,i,o;try{for(var u=r(p),a=u.next();!a.done;a=u.next())if((o=t[a.value])&&e in o)return o[e]}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return e}(t,e);return"string"==typeof i?v(i,n):function(t,e){var n=p.find((function(t){return Boolean(h[t])}))||b(p[0]);return v((0,h[n])(e.count,t),e)}(i,n)}e.default=function(t){return function(e,n){return void 0===n&&(n={}),y(t,e,n).join("")}},e.i18nRaw=function(t){return function(e,n){return void 0===n&&(n={}),y(t,e,n)}},e.setI18nLang=function(t){p="string"==typeof t?[t,b(t),"ru"]:t},e.getI18nLang=function(){return p[0]},e.resolveI18nLang=function(t,e,n){var r=e;if(-1===t.indexOf(r))switch(n){case"com":r="en";break;case"com.tr":r="tr";break;default:r="ru"}return r}},NFCg:function(t,e,n){"use strict";n.r(e),n.d(e,"useHistoryReplaceState",(function(){return u}));var r=n("cDcd"),i=n("tI3j"),o=n("Aok+"),u=function(){return Object(r.useCallback)((function(t,e,n){return void 0===e&&(e=location.href),Object(o.getHistoryQueue)().pushJob((function(){return history.replaceState(Object(i.mergeHistoryState)(t),"",e)}),!1,n)}),[])}},QGFb:function(t,e,n){"use strict";n.r(e),n.d(e,"reactBus",(function(){return r}));var r=function(){return window.Ya.reactBus}},QPDF:function(t,e,n){"use strict";n.r(e),n.d(e,"noop",(function(){return r}));var r=function(){}},Qa6K:function(t,e,n){"use strict";n.r(e),n.d(e,"prepareHitParams",(function(){return i})),n.d(e,"hit",(function(){return u})),n.d(e,"hitDelayed",(function(){return a}));var r=n("t8E2"),i=function(t,e){var n=t.dtype,r=void 0===n?"iweb":n,i=t.reqid,o=t.path,u=t.vars;void 0===e&&(e=!0);var a={dtype:r,reqid:i,path:o,pid:t.pid,cid:t.cid},c=u&&function(t,e){if("string"==typeof t||!t)return t||"";if(Array.isArray(t))return t.join(",");var n=e?"-":"";return Object.keys(t).filter((function(e){return void 0!==t[e]&&""!==t[e]})).map((function(e){return""+(n&&0===e.indexOf(n)?"":n)+e+"="+t[e]})).join(",")}(u,e);return c&&(a.vars=c),a},o=function(){};var u=r.canUseDom?function(t,e,n,r){var o,u,a=void 0===e?{}:e,c=a.reqid,s=a.dtype,f=a.vars,l=a.pid,d=a.cid,h=a.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,b=void 0===p?i:p;null===(u=null===(o=window.Ya)||void 0===o?void 0:o.counter)||void 0===u||u.hit(b({path:t,reqid:c,dtype:s,vars:f,pid:l,cid:d},n),h?{href:h}:void 0)}:o,a=r.canUseDom?function(t,e,n,r){var o,u,a=void 0===e?{}:e,c=a.reqid,s=a.dtype,f=a.vars,l=a.pid,d=a.cid,h=a.href;void 0===n&&(n=!0);var p=(void 0===r?{}:r).prepareHitParamsCb,b=void 0===p?i:p;null===(u=null===(o=window.Ya)||void 0===o?void 0:o.counter)||void 0===u||u.hitDelayed(b({path:t,reqid:c,dtype:s,vars:f,pid:l,cid:d},n),h?{href:h}:void 0)}:o},SA1Q:function(t,e,n){"use strict";function r(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(String(t[e]))})).join("&")}Object.defineProperty(e,"__esModule",{value:!0}),e.stringifyUrlParams=r,e.appendQueryString=function(t,e){var n=r(e);return 0===n.length?t:t.indexOf("?")>-1?t+"&"+n:t+"?"+n}},VQUf:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i}));var r=n("cDcd");function i(){var t=Object(r.useRef)(!1),e=Object(r.useCallback)((function(){return t.current}),[]);return Object(r.useEffect)((function(){return t.current=!0,function(){t.current=!1}})),e}},W54c:function(t,e,n){"use strict";n.r(e),n.d(e,"getGlobalContext",(function(){return r})),n.d(e,"getGlobalParam",(function(){return i})),n.d(e,"getFlags",(function(){return o})),n.d(e,"getFlagValue",(function(){return u})),n.d(e,"isFlagEnabled",(function(){return a}));var r=function(){var t;return(null===(t=null===window||void 0===window?void 0:window.Ya)||void 0===t?void 0:t.SerpContext)||{}},i=function(t){return r()[t]},o=function(){return i("expFlags")||{}},u=function(t){return o()[t]},a=function(t){return Boolean(u(t))}},Z29Q:function(t,e,n){"use strict";n.r(e),n.d(e,"isClient",(function(){return i})),n.d(e,"on",(function(){return o})),n.d(e,"off",(function(){return u})),n.d(e,"isDeepEqual",(function(){return a}));var r=n("nkPT"),i="object"==typeof window,o=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.addEventListener.apply(t,e)},u=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.removeEventListener.apply(t,e)},a=n.n(r).a},bVLW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("o62I");e.shouldSendCredentials=function(t,e){return!(!e||"omit"===e)&&("include"===e||r.getOrigin(t)===r.getOrigin(window.location))}},cDcd:function(t,e){t.exports=React},dNJn:function(t,e,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");var r=Object(t);return e.forEach((function(t){t&&Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);void 0!==n&&n.enumerable&&(r[e]=t[e])}))})),r}})},eWTM:function(t,e,n){"use strict";n.r(e),n.d(e,"useHistoryPushState",(function(){return u}));var r=n("cDcd"),i=n("tI3j"),o=n("Aok+"),u=function(){return Object(r.useCallback)((function(t,e,n){return void 0===e&&(e=location.href),Object(o.getHistoryQueue)().pushJob((function(){return history.pushState(Object(i.mergeHistoryState)(t),"",e)}),!1,n)}),[])}},faye:function(t,e){t.exports=ReactDOM},gKus:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"gWr/":function(t,e,n){"use strict";function r(t){var e=t.n||"",n=t.v||t.m;function r(r,i,o,u){var a=i?e+r+t.e+i:e+r,c=a;if(o){var s=" "+c+t.m;for(var f in o)if(o.hasOwnProperty(f)){var l=o[f];!0===l?c+=s+f:l&&(c+=s+f+n+l)}}if(void 0!==u)for(var d=0,h=u.length;d<h;d++){var p=u[d];if("string"==typeof p&&p)for(var b=p.split(" "),v=0;v<b.length;v++){var y=b[v];y!==a&&(c+=" "+y)}}return c}return function(t,e){return function(n,i,o){return"string"==typeof n?Array.isArray(i)?r(t,n,void 0,i):r(t,n,i,o):r(t,e,n,i)}}}Object.defineProperty(e,"__esModule",{value:!0});var i=r({e:"-",m:"_"});e.cn=i,e.withNaming=r},"i0/C":function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return u})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return s})),n.d(e,"__awaiter",(function(){return f})),n.d(e,"__generator",(function(){return l})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return h})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return b})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__spreadArray",(function(){return g})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return w})),n.d(e,"__asyncDelegator",(function(){return O})),n.d(e,"__asyncValues",(function(){return j})),n.d(e,"__makeTemplateObject",(function(){return _})),n.d(e,"__importStar",(function(){return S})),n.d(e,"__importDefault",(function(){return k})),n.d(e,"__classPrivateFieldGet",(function(){return x})),n.d(e,"__classPrivateFieldSet",(function(){return P}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function u(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,u=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(u=(o<3?i(u):o>3?i(e,n,u):i(e,n))||u);return o>3&&u&&Object.defineProperty(e,n,u),u}function c(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var d=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function h(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||d(e,t,n)}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,a=o.length;u<a;u++,i++)r[i]=o[u];return r}function g(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function w(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(c,s):f(o[0][2],n)}catch(r){f(o[0][3],r)}var n}function c(t){a("next",t)}function s(t){a("throw",t)}function f(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function O(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function j(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&d(e,t,n);return E(e,t),e}function k(t){return t&&t.__esModule?t:{default:t}}function x(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function P(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},"jC/K":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return i})),n.d(e,"ensuredForwardRef",(function(){return o}));var r=n("cDcd");function i(t){var e=Object(r.useRef)(t&&t.current);return Object(r.useEffect)((function(){t&&(t.current=e.current)}),[t]),e}function o(t){return Object(r.forwardRef)((function(e,n){var r=i(n);return t(e,r)}))}},jVLD:function(t,e,n){"use strict";"function"==typeof Element&&(Element.prototype.matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)},jm4S:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},mqMm:function(t,e,n){"use strict";n.r(e);var r=n("i0/C"),i=n("cDcd");e.default=function(t){void 0===t&&(t=new Set);var e=Object(i.useState)(t),n=e[0],o=e[1],u=Object(i.useMemo)((function(){return{add:function(t){return o((function(e){return new Set(Object(r.__spreadArrays)(Array.from(e),[t]))}))},remove:function(t){return o((function(e){return new Set(Array.from(e).filter((function(e){return e!==t})))}))},toggle:function(t){return o((function(e){return e.has(t)?new Set(Array.from(e).filter((function(e){return e!==t}))):new Set(Object(r.__spreadArrays)(Array.from(e),[t]))}))},reset:function(){return o(t)}}}),[o]),a=Object(r.__assign)({has:Object(i.useCallback)((function(t){return n.has(t)}),[n])},u);return[n,a]}},n8NE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t%10,r=t%100;return t?1===n&&11!==r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many||"":e.none||""}},"n9/c":function(t,e,n){"use strict";n.r(e),n.d(e,"HydratePriority",(function(){return p})),n.d(e,"createApp",(function(){return g})),n.d(e,"getRootMounter",(function(){return m}));var r,i,o=n("cDcd"),u=n.n(o),a=n("faye"),c=n.n(a),s=n("Aplp"),f=n.n(s),l=(n("W54c"),n("QGFb")),d=n("t8E2");function h(t){var e=("undefined"!=typeof window&&(r=window.innerHeight,i=window.innerWidth),{height:r,width:i}),n=t.getBoundingClientRect();return 0!==n.width&&0!==n.height&&(!(n.bottom<=0||n.right<=0)&&(n.top<e.height&&n.left<e.width))}n("dNJn"),n("jVLD");var p,b=function(){return b=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},b.apply(this,arguments)},v="Root",y="Root_inited";function g(t,e){void 0===e&&(e={});var n={},r=e.hydratePriority,i=void 0===r?p.force:r;return function(e){var r;if(d.canUseDom){var a=m(e,t,n);Object(l.reactBus)()&&(Object(l.reactBus)().on("react-adapter:unmount",(function(t){return function(t,e){Object.keys(t).forEach((function(n){var r=t[n];e&&!e.contains(r)||(c.a.unmountComponentAtNode(r),r.classList.remove(y),delete t[n])}))}(n,t)})),Object(l.reactBus)().on("react-adapter:mount",(function(t){return a(t)})));var s=(null===(r=window.Ya)||void 0===r?void 0:r.SerpContext)||{};(s&&s.expFlags||{}).react_init_on_page_load||s.reactInitOnPageLoad?"complete"===document.readyState||"interactive"===document.readyState?a():document.addEventListener("DOMContentLoaded",(function(){return a()})):window.BEM&&BEM.DOM.ready((function(){return a()}))}return function(n){return u.a.createElement("div",{className:v,id:t+"-"+f()(),"data-state":JSON.stringify(n),"data-hydrate-priority":i},u.a.createElement(o.StrictMode,null,u.a.createElement(e,b({},n))))}}}function m(t,e,n){return function(r){for(var i=r?r.getElementsByClassName(v):document.getElementsByClassName(v),o=new RegExp("^"+e+"-"),u=0;u<i.length;u+=1){var a=i[u],c=a.id;c&&o.test(c)&&w(t,a,n)}}}function w(t,e,n){var r=e.getAttribute("data-hydrate-priority"),i=function(){return function(t,e,n){var r=e.id;if(n[r]||e.classList.contains(y))return;var i=function(t){return JSON.parse(t.getAttribute("data-state")||"{}")}(e);n[r]=e,c.a.hydrate(u.a.createElement(o.StrictMode,null,u.a.createElement(t,b({},i))),e,(function(){e.classList.add(y)}))}(t,e,n)};if(r!==p.force)if(r!==p.checkVisible){if(r!==p.deferred)return i();window.requestAnimationFrame(i)}else{h(e)?i():window.requestAnimationFrame(i)}else i()}!function(t){t.force="force",t.checkVisible="check-visible",t.deferred="deferred"}(p||(p={}))},nkPT:function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var u=o[i];if(("_owner"!==u||!e.$$typeof)&&!t(e[u],n[u]))return!1}return!0}return e!=e&&n!=n}},o62I:function(t,e,n){"use strict";function r(t,e){if("function"!=typeof URL){var n=document.createElement("a");return n.href=t,{hostname:n.hostname,port:n.port,protocol:n.protocol,origin:n.origin}}try{return new URL(t,e)}catch(r){}}Object.defineProperty(e,"__esModule",{value:!0}),e.parseUrl=r,e.getOrigin=function(t){var e="string"==typeof t?r(t):t;if(!e)return"";if(e.origin)return e.origin;var n=e.port?":"+e.port:"";return e.protocol+"//"+e.hostname+n},e.getHostname=function(t,e){var n=r(t,e);return n?n.hostname:""}},qWFb:function(t,e,n){"use strict";n.r(e),n.d(e,"App",(function(){return L}));var r=n("n9/c"),i=n("cDcd"),o=n.n(i),u=n("W54c"),a=n("QGFb"),c=n("Qa6K"),s=n("s2SP"),f=n("qqpq"),l=Array.prototype.slice,d=function(t){var e=Object(i.useCallback)((function(e){var n=e.clipboardData||window.clipboardData;if(n){var r=function(t){if(t.items){var e=l.call(t.items).find((function(t){return"file"===t.kind}));if(e)return e.getAsFile()}return t.files.length>0?t.files[0]:null}(n);r&&(e.preventDefault(),t(r))}}),[t]);Object(f.default)("paste",e)},h=n("uNGT"),p=n("Dps+"),b=Object(p.cn)("CbirCore"),v=function(t){var e=Object(u.getGlobalParam)("project").replace("/",".");Object(c.hit)(e,{dtype:"stred",pid:40,cid:72952}),location.assign(t.captchaUrl)},y=n("D1uz"),g=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},m=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},w=function(){var t=Object(y.useChangeCbirPage)();return Object(i.useCallback)((function(e){var n=e.originalImageUrl,r=e.cbirId;return g(void 0,void 0,void 0,(function(){var e;return m(this,(function(i){switch(i.label){case 0:return e={rpt:"imageview",from:void 0},n&&(e.url=n),r&&(e.cbir_id=r),BEM.blocks["i-global"].param("isYandexApp")&&(e.service="cbir.yandex"),"0"===BEM.blocks.uri.getParamValue("native")&&(e.native="0"),[4,t({pageType:"search-by-image",queryParams:e,state:{cbirCropRect:void 0,cbirCropId:void 0}})];case 1:return i.sent(),[2]}}))}))}),[t])},O=function(){var t=Object(i.useRef)(),e=Object(i.useCallback)((function(e){var n=e+"_"+Date.now()+"_"+Math.random();return t.current=n,n}),[]),n=Object(i.useCallback)((function(e){return t.current===e}),[]),r=Object(i.useCallback)((function(){t.current=void 0}),[]),o=Object(i.useCallback)((function(e){t.current=e.searchUniqKey}),[]);return Object(s.useReactBusOn)("cbir:search-by-image:start",o),Object(s.useReactBusOn)("cbir:search-by-image:success",r),Object(s.useReactBusOn)("cbir:search-by-image:error",r),Object(s.useReactBusOn)("cbir:popup-closed",r),[e,n]},j=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},_=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},E=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},S=n("t8E2"),k=/^(?:http|https|ftp):\/\//,x=function(t,e){if(void 0===e&&(e="http:"),k.test(t))return t;var n=S.canUseDom?location.protocol:e;return 0===t.indexOf("//")?n+t:n+"//"+t},P=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}c((r=r.apply(t,e||[])).next())}))},R=function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},C=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},I=n("mqMm"),T=n("rpyk"),U=n("qk/3"),A=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},M=n("jC/K"),B=Object(i.forwardRef)((function(t,e){var n=t.onSelect,r=Object(M.default)(e),u=Object(i.useCallback)((function(){var t;if(r.current){var e=null===(t=r.current.files)||void 0===t?void 0:t[0];e&&n(e),r.current.value=""}}),[r,n]);return o.a.createElement("input",{ref:r,className:b("FileInput"),type:"file",accept:"image/*",onChange:u,hidden:!0})})),D=function(t){var e=t.downscaleWidth,n=t.downscaleHeight,r=t.downscaleQuality,f=t.isYandexBroNativeCameraDialog,l=void 0!==f&&f,p=t.isYandexAppAndroid,b=void 0!==p&&p,y=t.isYandexAppIos,g=void 0!==y&&y,m=t.counterPaths,S=Object(i.useRef)(null),k=Object(i.useCallback)((function(t){"file"===t.searchType?Object(c.hit)(m.searchByFileStart,{vars:{size:t.file.size,type:t.file.type}}):Object(c.hit)(m.searchByUrlStart,{vars:{url:t.url}})}),[m]);Object(s.useReactBusOn)("cbir:search-by-image:start",k);var M=Object(i.useCallback)((function(t){"file"===t.searchType?Object(c.hit)(m.searchByFileSuccess,{vars:{size:t.file.size,type:t.file.type,time:t.time}}):Object(c.hit)(m.searchByUrlSuccess,{vars:{url:t.url,time:t.time}})}),[m]);Object(s.useReactBusOn)("cbir:search-by-image:success",M);var D=Object(i.useCallback)((function(t){var e,n=(null===(e=t.error)||void 0===e?void 0:e.message)||t.error;"file"===t.searchType?Object(c.hit)(m.searchByFileError,{vars:{size:t.file.size,type:t.file.type,time:t.time,error:"string"==typeof n?n:""}}):Object(c.hit)(m.searchByUrlError,{vars:{url:t.url,time:t.time,error:"string"==typeof n?n:""}})}),[m]),L=Object(i.useCallback)((function(){Object(c.hit)(m.fileDialogOpen)}),[m]);Object(s.useReactBusOn)("cbir:search-by-image:error",D);var F=Object(i.useCallback)((function(){var t;L(),null===(t=S.current)||void 0===t||t.click()}),[L]);Object(s.useReactBusOn)("cbir:open-file-dialog",F);var q=Object(i.useCallback)((function(){if(!Object(u.isFlagEnabled)("images_cbir_touch_camera"))return l||b?(L(),location.assign("native://image_search")):g?(L(),location.assign("wireframe://?intent=openImageSearchScreen")):void F()}),[l,b,g,L,F]);Object(s.useReactBusOn)("cbir:open-camera",q),function(t){var e=t.downscaleWidth,n=t.downscaleHeight,r=t.downscaleQuality,o=E(O(),2),u=o[0],c=o[1],f=w(),l=Object(i.useCallback)((function(t){return j(void 0,void 0,void 0,(function(){var i,o,s,l;return _(this,(function(d){switch(d.label){case 0:i=Date.now(),o=u("file"),d.label=1;case 1:return d.trys.push([1,4,,5]),Object(a.reactBus)().emit("cbir:search-by-image:start",{searchType:"file",file:t,searchUniqKey:o}),[4,Object(h.searchByFile)(t,{cbird:111,downscaleWidth:e,downscaleHeight:n,downscaleQuality:r})];case 2:return s=d.sent(),c(o)?"captcha"===s.type?[2,v(s)]:[4,f({originalImageUrl:s.originalImageUrl,cbirId:s.cbirId})]:[2];case 3:return d.sent(),Object(a.reactBus)().emit("cbir:search-by-image:success",{searchType:"file",file:t,downscaledFile:s.downscaledFile,originalImageUrl:s.originalImageUrl,cbirId:s.cbirId,time:Date.now()-i,searchUniqKey:o}),[3,5];case 4:return l=d.sent(),Object(a.reactBus)().emit("cbir:search-by-image:error",{searchType:"file",error:l,file:t,time:Date.now()-i,searchUniqKey:o}),[3,5];case 5:return[2]}}))}))}),[e,n,r,u,c,f]);Object(s.useReactBusOn)("cbir:search-by-file",l)}({downscaleWidth:e,downscaleHeight:n,downscaleQuality:r}),function(){var t=C(O(),2),e=t[0],n=t[1],r=w(),o=Object(i.useCallback)((function(t){return P(void 0,void 0,void 0,(function(){var i,o,u,c,s;return R(this,(function(f){switch(f.label){case 0:i=x(t),o=Date.now(),u=e("url"),f.label=1;case 1:return f.trys.push([1,4,,5]),Object(a.reactBus)().emit("cbir:search-by-image:start",{searchType:"url",url:i,searchUniqKey:u}),[4,Object(h.searchByUrl)(i,{cbird:111})];case 2:return c=f.sent(),n(u)?"captcha"===c.type?[2,v(c)]:[4,r({originalImageUrl:c.originalImageUrl,cbirId:c.cbirId})]:[2];case 3:return f.sent(),Object(a.reactBus)().emit("cbir:search-by-image:success",{searchType:"url",url:i,time:Date.now()-o,searchUniqKey:u}),[3,5];case 4:return s=f.sent(),Object(a.reactBus)().emit("cbir:search-by-image:error",{searchType:"url",error:s,url:i,time:Date.now()-o,searchUniqKey:u}),[3,5];case 5:return[2]}}))}))}),[e,n,r]);Object(s.useReactBusOn)("cbir:search-by-url",o)}();var Q=Object(i.useCallback)((function(t){Object(c.hit)(m.clipboardFile,{vars:{size:t.size,type:t.type}}),Object(a.reactBus)().emit("cbir:search-by-file",t)}),[m]);d(Q),function(t,e){var n=Object(i.useRef)(!1),r=Object(i.useRef)(!1),o=Object(i.useRef)(0),u=A(Object(I.default)(),2),a=u[0],c=u[1],f=c.add,l=c.remove,d=A(Object(I.default)(),2),h=d[0],p=d[1],b=p.add,v=p.remove,y=Object(i.useCallback)((function(t,e){f(t),e&&b(t)}),[f,b]),g=Object(i.useCallback)((function(t){l(t),v(t)}),[l,v]);Object(s.useReactBusOn)("cbir:register-global-drop-area",y),Object(s.useReactBusOn)("cbir:unregister-global-drop-area",g);var m=Object(i.useCallback)((function(){window.clearTimeout(o.current),o.current=0}),[]),w=Object(i.useCallback)((function(e){n.current||(m(),n.current=!0,r.current=e,requestAnimationFrame((function(){return t(e)})))}),[m,t]),O=Object(i.useCallback)((function(){if(n.current){m();var t=r.current;n.current=!1,r.current=!1,o.current=window.setTimeout(e,50,t)}}),[m,e]);Object(i.useEffect)((function(){return a.forEach((function(t){t.addEventListener("drop",O)})),function(){a.forEach((function(t){t.removeEventListener("drop",O)}))}}),[a,O]),Object(i.useEffect)((function(){return h.forEach((function(t){t.addEventListener("dragleave",O)})),function(){h.forEach((function(t){t.removeEventListener("dragleave",O)}))}}),[h,O]),Object(i.useEffect)((function(){var t=function(t){var e=t.dataTransfer;if(t.target&&e){var n=Object(T.findImageLikeElement)(t.target);if(n){n!==t.target&&"function"==typeof e.setDragImage&&e.setDragImage(n,0,0);var r=Object(U.extractImageUrl)(n);r&&function(t,e){try{t.setData("text/uri-list",e),t.setData("text/plain",e)}catch(n){t.setData("URL",e),t.setData("Text",e)}}(e,x(r))}}w(!1)},e=function(){return w(!0)},n=function(){return O()};return document.addEventListener("dragstart",t),document.addEventListener("dragover",e),document.addEventListener("dragend",n),function(){document.removeEventListener("dragstart",t),document.removeEventListener("dragover",e),document.removeEventListener("dragend",n)}}),[w,O])}(Object(i.useCallback)((function(t){Object(c.hit)(m.dragStart),Object(a.reactBus)().emit("cbir:drag-start",t)}),[m]),Object(i.useCallback)((function(t){Object(c.hit)(m.dragEnd),Object(a.reactBus)().emit("cbir:drag-end",t)}),[m]));var N=Object(i.useCallback)((function(t){Object(c.hit)(m.fileDialogSelect,{vars:{size:t.size,type:t.type}}),Object(a.reactBus)().emit("cbir:search-by-file",t)}),[m]);return o.a.createElement(B,{ref:S,onSelect:N})},L=Object(r.createApp)("CbirCore")(D)},"qk/3":function(t,e,n){"use strict";n.r(e),n.d(e,"extractImageUrl",(function(){return r}));var r=function(t){return"IMG"===t.tagName?t.getAttribute("src"):function(t){var e=getComputedStyle(t).backgroundImage.match(/url\("([^"]+)"\)/);return e?e[1]:null}(t)}},qqpq:function(t,e,n){"use strict";n.r(e);var r=n("cDcd"),i=n("Z29Q").isClient?window:null,o=function(t){return!!t.addEventListener},u=function(t){return!!t.on};e.default=function(t,e,n,a){void 0===n&&(n=i),Object(r.useEffect)((function(){if(e&&n)return o(n)?n.addEventListener(t,e,a):u(n)&&n.on(t,e,a),function(){o(n)?n.removeEventListener(t,e,a):u(n)&&n.off(t,e,a)}}),[t,e,n,JSON.stringify(a)])}},rpyk:function(t,e,n){"use strict";n.r(e),n.d(e,"findImageLikeElement",(function(){return r}));var r=function(t){return t.nodeType!==Node.ELEMENT_NODE?null:"IMG"===t.tagName?t:t.querySelector("img[src]")||t.querySelector("[style*=background-image]")||null}},s2SP:function(t,e,n){"use strict";n.r(e),n.d(e,"useReactBusOn",(function(){return c}));var r=n("cDcd"),i=n("VQUf"),o=n("QGFb"),u=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)u.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return u},a=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},c=function(t,e){var n=Object(i.default)();Object(r.useEffect)((function(){var r=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n()&&e.apply(void 0,a([],u(t),!1))};return Object(o.reactBus)().on(t,r),function(){Object(o.reactBus)().off(t,r)}}),[t,e,n])}},t8E2:function(t,e,n){"use strict";n.r(e),n.d(e,"canUseDom",(function(){return r}));var r=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)},tI3j:function(t,e,n){"use strict";n.r(e),n.d(e,"getGlobalHistoryState",(function(){return o})),n.d(e,"mergeHistoryState",(function(){return u})),n.d(e,"getDefaultState",(function(){return a})),n.d(e,"applyDefaultState",(function(){return c}));var r=n("t8E2"),i=Object.prototype.hasOwnProperty,o=function(){return Object.assign({},r.canUseDom?history.state:null)},u=function(t){return Object.assign({},o(),t)},a=function(t){return void 0===t&&(t={}),Object.assign({},"function"==typeof t?t():t)},c=function(t,e){var n=Object.assign({},t);for(var r in e)i.call(e,r)&&!i.call(n,r)&&(n[r]=e[r]);return n}},uNGT:function(t,e,n){"use strict";n.r(e),n.d(e,"BufferStream",(function(){return r})),n.d(e,"EXIF_START_OF_IMAGE_MARKER",(function(){return i})),n.d(e,"EXIF_START_OF_STREAM_MARKER",(function(){return o})),n.d(e,"EXIF_END_OF_IMAGE_MARKER",(function(){return u})),n.d(e,"EXIF_APP1_MARKER",(function(){return a})),n.d(e,"EXIF_LITTLE_ENDIAN_ALIGN_MARKER",(function(){return c})),n.d(e,"EXIF_ORIENTATION_MARKER",(function(){return s})),n.d(e,"EXIF_ORIENTATION_VALUES_MAP",(function(){return f})),n.d(e,"getExifOrientation",(function(){return p})),n.d(e,"isExifMarker",(function(){return h})),n.d(e,"supportsExifOrientation",(function(){return d})),n.d(e,"readBlobAsBuffer",(function(){return l})),n.d(e,"readBlobAsText",(function(){return b})),n.d(e,"blobToCanvas",(function(){return O})),n.d(e,"canvasToBlob",(function(){return j})),n.d(e,"createCanvas",(function(){return m})),n.d(e,"imageToCanvas",(function(){return w})),n.d(e,"loadImage",(function(){return y})),n.d(e,"resizeBlob",(function(){return S})),n.d(e,"resizeCanvas",(function(){return E})),n.d(e,"buildBackendUploadUrl",(function(){return P})),n.d(e,"fetchSearchByFile",(function(){return C})),n.d(e,"fetchSearchByUrl",(function(){return I})),n.d(e,"getCbirIdFromUploadResponse",(function(){return T})),n.d(e,"isCaptchaResponse",(function(){return U})),n.d(e,"processBackendResponse",(function(){return R})),n.d(e,"buildSearchResultsUrl",(function(){return A})),n.d(e,"getOriginalImageUrlFromPreviewUrl",(function(){return M})),n.d(e,"processSearchResponse",(function(){return B})),n.d(e,"searchByFile",(function(){return L})),n.d(e,"searchByUrl",(function(){return F}));var r=function(){function t(t){this.offset=0,this.littleEndian=!1,this.view=new DataView(t)}return t.prototype.skip=function(t){this.offset+=t},t.prototype.nextUint16=function(){var t=this.view.getUint16(this.offset,this.littleEndian);return this.skip(2),t},t.prototype.nextUint32=function(){var t=this.view.getUint32(this.offset,this.littleEndian);return this.skip(4),t},t.prototype.setLittleEndian=function(t){this.littleEndian=t},t.prototype.isFinished=function(){return this.offset>=this.view.byteLength},t}(),i=65496,o=65498,u=65497,a=65505,c=18761,s=274,f={none:1,flip:3,right:6,left:8,undefined:9},l=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=n,r.readAsArrayBuffer(t)}))},d=function(){return"from-image"===window.getComputedStyle(document.body).imageOrientation},h=function(t){return 65280==(65280&t)},p=function(t){return d()?Promise.resolve(f.none):l(t).then((function(t){var e,n,l=new r(t);if(l.nextUint16()!==i)return f.undefined;for(;!l.isFinished()&&(e=l.nextUint16(),h(e)&&e!==o&&e!==u);)if(e===a){l.skip(2),l.skip(6),l.setLittleEndian(l.nextUint16()===c),l.skip(2),l.skip(l.nextUint32()-8),n=l.nextUint16();for(var d=0;d<n;d++){if(l.nextUint16()===s)return l.skip(6),l.nextUint16();l.skip(10)}}else l.setLittleEndian(!1),l.skip(l.nextUint16()-2);return f.undefined}))},b=function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=n,r.readAsText(t)}))},v=function(t,e,n){void 0!==n&&(t[e]=n)},y=function(t,e){var n=void 0===e?{}:e,r=n.crossOrigin,i=n.referrerPolicy;return new Promise((function(e,n){var o=new Image;v(o,"crossOrigin",r),v(o,"referrerPolicy",i),v(o,"onload",(function(){return e(o)})),v(o,"onerror",(function(){return n(new Error("Image loading failed"))})),v(o,"src",t)}))},g=function(t){var e=window.URL||window.webkitURL,n=e.createObjectURL(t);return y(n).then((function(t){return e.revokeObjectURL(n),t})).catch((function(t){return e.revokeObjectURL(n),Promise.reject(t)}))},m=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},w=function(t,e){var n,r,i,o,u,a,c,s=function(t,e){return e===f.left||e===f.right?{width:t.height,height:t.width}:{width:t.width,height:t.height}}(t,e),l=(r=5e6,i=4096,o=(n=s).width/n.height,u=0,a=0,c={width:0,height:0},n.width*n.height>r?n.width>n.height?(u=Math.sqrt(r*o),c={width:Math.floor(u),height:Math.floor(r/u)}):(a=Math.sqrt(r/o),c={width:Math.floor(r/a),height:Math.floor(a)}):c=n,c.width>i&&(c.width=i,c.height=Math.round(c.width/o)),c.height>i&&(c.height=i,c.width=Math.round(o*c.height)),c),d=m(l.width,l.height),h=d.getContext("2d");if(!h)throw new Error("Cannot get a canvas context");return e===f.left?(h.setTransform(0,-1,1,0,0,l.height),h.drawImage(t,0,0,l.height,l.width)):e===f.right?(h.setTransform(0,1,-1,0,l.width,0),h.drawImage(t,0,0,l.height,l.width)):e===f.flip?(h.setTransform(-1,0,0,-1,l.width,l.height),h.drawImage(t,0,0,l.width,l.height)):(h.setTransform(1,0,0,1,0,0),h.drawImage(t,0,0,l.width,l.height)),d},O=function(t){return Promise.all([g(t),p(t)]).then((function(t){var e=t[0],n=t[1];return w(e,n)}))},j=function(t,e,n){return void 0===n&&(n=1),new Promise((function(r,i){try{t.toBlob((function(t){return t?r(t):i(new Error("Resulting Blob is empty"))}),e,n)}catch(o){i(o)}}))},_=function(t,e,n){return t.width>e&&t.height>n},E=function(t,e,n){var r=t.width/t.height;if(n<e?n=Math.round(e/r):e=Math.round(n*r),!_(t,e,n))return Promise.resolve(t);var i=Math.ceil(Math.log(t.width/e)/Math.LN2),o=e*Math.pow(2,i-1),u=n*Math.pow(2,i-1),a=function(r,c){var s=m(o,u),f=s.getContext("2d");return f?(f.drawImage(t,0,0,o,u),t.width=1,t.height=1,t=s,i-=1,o=Math.round(o/2),u=Math.round(u/2),i<=0||!_(t,e,n)?r(t):void requestAnimationFrame((function(){return a(r,c)}))):c(new Error("Cannot get a canvas context"))};return new Promise(a)},S=function(t,e,n,r,i){return void 0===r&&(r=t.type),void 0===i&&(i=1),O(t).then((function(t){return E(t,e,n)})).then((function(t){return j(t,r,i)}))},k=n("8Qk7"),x=function(){return x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)},P=function(t,e){return void 0===t&&(t=window.location.origin),void 0===e&&(e={}),Object(k.appendQueryString)(t+"/images-apphost/image-download",x(x({},e),{images_avatars_size:"preview",images_avatars_namespace:"images-cbir"}))},R=function(t){if(t.status<200||t.status>=300)throw new Error("Image upload failed, status code "+t.status);return t.json()},C=function(t,e,n){return fetch(P(n,{cbird:e}),{method:"POST",body:t}).then((function(t){return R(t)}))},I=function(t,e,n){return fetch(P(n,{url:t,cbird:e}),{method:"GET"}).then((function(t){return R(t)}))},T=function(t){return t.image_shard+"/"+t.image_id},U=function(t){return"type"in t&&"captcha"===t.type},A=function(t){var e=t.originalImageUrl,n=t.cbirId,r=t.platform,i=t.origin,o=void 0===i?window.location.origin:i,u={rpt:"imageview"};return e&&(u.url=e),n&&(u.cbir_id=n),Object(k.appendQueryString)(""+o+function(t){switch(t){case"touch-phone":return"/images/touch/search";case"touch-pad":return"/images/pad/search";case"desktop":return"/images/search"}}(r),u)},M=function(t){return t.replace(/\/preview$/,"/orig")},B=function(t,e){var n=e.withRedirect,r=void 0!==n&&n,i=e.platform,o=void 0===i?"desktop":i,u=e.origin;if(U(t)){var a={type:"captcha",captchaUrl:t.captcha["captcha-page"]};return r&&window.location.assign(a.captchaUrl),a}var c=M(t.url),s=T(t),f={type:"success",cbirId:s,originalImageUrl:c,searchResultsUrl:A({originalImageUrl:c,cbirId:s,platform:o,origin:u})};return r&&window.location.assign(f.searchResultsUrl),f},D=function(){return D=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},D.apply(this,arguments)},L=function(t,e){var n=e.cbird,r=e.downscaleWidth,i=e.downscaleHeight,o=e.downscaleQuality,u=void 0===o?1:o,a=e.withRedirect,c=e.platform,s=e.origin;return S(t,r,i,"image/jpeg",u).then((function(t){return function(t){return C(t,n,s).then((function(t){return B(t,{withRedirect:a,platform:c,origin:s})})).then((function(e){return"success"===e.type?D(D({},e),{downscaledFile:t}):e}))}(t)}))},F=function(t,e){var n=e.cbird,r=e.withRedirect,i=e.platform,o=e.origin;return I(t,n,o).then((function(t){return B(t,{withRedirect:r,platform:i,origin:o})}))}},yYyQ:function(t,e,n){n.r(e);var r=n("MMKl");Object(r.setI18nLang)("en")},"zU8/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t?e.some:e.none||""}}});